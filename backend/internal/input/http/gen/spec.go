// Package gen provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package gen

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
