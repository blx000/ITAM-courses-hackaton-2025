// Package gen provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package gen

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"3MDG7iBgvPvPzuMOGu+P/wwAAP//bxv4RIY0AAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
